(()=>{"use strict";function t(t,e,n,r,o,i,c){n.fillStyle="#ffffffaa",n.fillRect(t+r+o*c,e,100,60),n.fillRect(t+20+r+o*c,e+20,100,60)}function e(e,n,r,o,i){var c=[e,n,r,o,i];e.fillStyle="#7f77fe",e.fillRect(n+r*i,0,r+r*i,o),t.apply(void 0,[200,100].concat(c))}function n(t,e,n,r,o){t.fillStyle="#000033",t.fillRect(e+n*o,0,n+n*o,r),t.fillStyle="#333388dd",t.fillRect(200+e+n*o,100,100,60),t.fillRect(230+e+n*o,130,100,60)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=r,this.windowWidth=r.canvas.attributes.width.textContent,this.windowHeight=r.canvas.attributes.height.textContent,this.bgSelect=o,this.background=[n,e,n]}var o,i;return o=t,(i=[{key:"update",value:function(t){this.xScrollOffset=.5*t%this.windowWidth,this.render()}},{key:"render",value:function(){for(var t=0;t<2;t++)this.background[this.bgSelect](this.ctx,this.xScrollOffset,this.windowWidth,this.windowHeight,t)}}])&&r(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),t}();const i=[function(t){return{player:[20,t-21],background:2,bushes:[[750,t-21]],floors:[],floorsWithBottom:[[-100,20,6e3],[-100,40,100]],bricks:[[750,150],[850,150]],breakableBricks:[[500,150],[700,150],[800,150],[900,150],[800,350]],enemies:[[750,t-21]]}},function(t){return{player:[20,21],background:1,bushes:[[120,20],[1e3,20]],floors:[],floorsWithBottom:[[-100,0,6e3],[-100,40,100]],bricks:[[750,150],[850,150]],breakableBricks:[[500,150],[700,150],[800,150],[900,150],[800,350]],enemies:[[750,21]]}}];function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.windowWidth=e.canvas.attributes.width.textContent,this.windowHeight=e.canvas.attributes.height.textContent,this.xScrollOffset=0,this.height=100,this.width=50,this.x=n+this.xScrollOffset,this.y=r,this.color="#ff0000",this.id=o,this.isObstacle=!0}var e,n;return e=t,(n=[{key:"update",value:function(t){this.xScrollOffset=t,this.render()}},{key:"render",value:function(){this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+this.xScrollOffset,this.y-this.height,this.width,this.height)}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function a(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(o){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function c(t,e,n,r,o){var f;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(f=i.call(this,t,e,n,r)).height=1,f.width=o,f.color="#ffff00",f.bgHeight=20,f.bgColor="#003333",f}return e=c,(n=[{key:"render",value:function(){return this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(this.x+this.xScrollOffset,this.y,this.width,this.bgHeight),this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+this.xScrollOffset,this.y-this.height,this.width,this.height),0}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(f);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function d(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v(n);if(r){var o=v(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return d(this,t)});function i(t,e,n,r,c){var f;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(f=o.call(this,t,e,n,r)).height=20,f.width=c,f.color="#503c04",f}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(f);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){f=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw i}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function j(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return j(this,t)});function c(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=i.call(this,t,e,n,r)).movingLeft=!1,o.movingRight=!1,o.shortJumping=!1,o.longJumping=!1,o.standing=!0,o.crouching=!1,o.xLeftVelocity=0,o.xRightVelocity=0,o.yUpVelocity=0,o.yDownVelocity=0,o.obstacles=[],o.objectStandingOn="none",o.isKillable=!0,o.isDead=!1,o}return e=c,(n=[{key:"update",value:function(t){this.xScrollOffset=t,this.isDead?(this.y+=10,this.color="#555555",this.movingRight=!1,this.movingLeft=!1):this.checkObstacleSurfaces()?0==this.yUpVelocity&&(this.yDownVelocity=0,this.standing=!0):(this.standing=!1,this.moveDown()),this.movingLeft&&this.moveLeft(),this.movingRight&&this.moveRight(),this.crouching?this.crouch():this.standUp(),this.render()}},{key:"crouch",value:function(){this.height=50}},{key:"standUp",value:function(){this.height=100}},{key:"moveLeft",value:function(){var t,e,n=w(this.obstacles);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.x+r.width+r.xScrollOffset<this.x+this.xScrollOffset||r.y-r.height>this.y||this.y-this.height>r.y||this.x+this.xScrollOffset<r.x+r.xScrollOffset||r.height<=1||r.id==this.id||!r.isObstacle||(t=r)}}catch(t){n.e(t)}finally{n.f()}t?this.isPlayer?(this.x=t.x+t.width,this.xLeftVelocity=0,t.isEnemy&&(this.isDead=!0)):(this.movingLeft=!1,this.movingRight=!0,t.isPlayer&&(t.isDead=!0)):this.x-=this.xLeftVelocity}},{key:"moveRight",value:function(){var t,e,n=w(this.obstacles);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.x-this.width+r.xScrollOffset-1>this.x+this.xScrollOffset||r.y-r.height>this.y||this.y-this.height>r.y||this.x+this.xScrollOffset>r.x+r.xScrollOffset||r.height<=1||r.id==this.id||!r.isObstacle||(t=r)}}catch(t){n.e(t)}finally{n.f()}t?this.isPlayer?(this.x=t.x-this.width-1,this.xRightVelocity=0,t.isEnemy&&(this.isDead=!0)):(this.movingRight=!1,this.movingLeft=!0,t.isPlayer&&(t.isDead=!0)):this.x+=this.xRightVelocity}},{key:"bounce",value:function(){this.yUpVelocity=26,this.standing=!1}},{key:"checkObstacleSurfaces",value:function(){var t,e=[],n=w(this.obstacles);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this.y>=r.y-r.height-1&&this.x+this.width+this.xScrollOffset>=r.x+r.xScrollOffset&&this.x+this.xScrollOffset<r.x+r.width+r.xScrollOffset&&this.y<r.y&&r.isObstacle;e.push(o),o&&r.isKillable&&(r.isEnemy||this.isEnemy&&r.isPlayer)&&(r.isDead=!0,this.bounce())}}catch(t){n.e(t)}finally{n.f()}return e.some((function(t){return t}))}},{key:"checkObstacleCeilings",value:function(){var t,e=[],n=w(this.obstacles);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this.y-this.height==r.y&&this.x+this.width+this.xScrollOffset>=r.x+r.xScrollOffset&&this.x+this.xScrollOffset<r.x+r.width+r.xScrollOffset&&r.height>1&&r.isObstacle;if(e.push(o),o&&r.isKillable&&r.isBreakableBrick){r.isDead=!0;break}}}catch(t){n.e(t)}finally{n.f()}return e.some((function(t){return t}))}},{key:"moveDown",value:function(){this.y>=this.windowHeight&&(this.isDead=!0);for(var t=0;t<this.yDownVelocity&&(this.y++,!this.checkObstacleSurfaces());t++);this.yDownVelocity<20&&this.yDownVelocity++}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(f);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}function V(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(r);if(o){var n=A(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return V(this,t)});function c(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=i.call(this,t,e,n,r)).color="#a41f19",o.isPlayer=!0,o.offset=0,o.height=100,o.width=46,o}return e=c,(n=[{key:"determineView",value:function(){return this.x>400&&(this.offset=-(this.x-400)),this.offset}},{key:"update",value:function(t){this.xScrollOffset=t,this.isDead&&(this.y+=10,this.color="#555555",this.movingRight=!1,this.movingLeft=!1);for(var e=0;e<this.yUpVelocity;e++)this.y--,this.checkObstacleCeilings()&&(this.yUpVelocity=0,this.longJumping=!1,this.shortJumping=!1);return this.yUpVelocity>0&&this.yUpVelocity--,this.shortJumping&&this.standing&&!this.isDead?this.shortJump():this.longJumping&&this.shortJumping&&this.yUpVelocity>0?this.fullJump():this.checkObstacleSurfaces()?0==this.yUpVelocity&&(this.yDownVelocity=0,this.standing=!0):(this.standing=!1,this.moveDown()),this.movingLeft&&(!this.crouching||this.yUpVelocity>0)?(this.moveLeft(),this.xLeftVelocity<20&&!this.isDead&&(this.xLeftVelocity+=1)):this.xLeftVelocity>0?(this.moveLeft(),this.xLeftVelocity--):this.xLeftVelocity=0,this.movingRight&&(!this.crouching||this.yUpVelocity>0)?(this.moveRight(),this.xRightVelocity<20&&!this.isDead&&(this.xRightVelocity+=1)):this.xRightVelocity>0?(this.moveRight(),this.xRightVelocity--):this.xRightVelocity=0,this.crouching?this.crouch():this.standUp(),this.render()}},{key:"crouch",value:function(){this.height=50}},{key:"standUp",value:function(){this.height=100}},{key:"shortJump",value:function(){this.yUpVelocity=20,this.standing=!1}},{key:"fullJump",value:function(){this.shortJumping=!1,this.standing=!1,this.yUpVelocity+=10,this.longJumping=!1}},{key:"displayStats",value:function(){this.ctx.fillStyle=this.color,this.ctx.font="16px Arial",this.ctx.fillText("(x) ".concat(this.x," - ").concat(this.x+this.width," (y) ").concat(this.y," - ").concat(this.y-this.height,"   ").concat(this.xScrollOffset),10,30);var t,e=0,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){f=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw i}}}}(this.obstacles);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.ctx.fillStyle=r.color,this.ctx.fillText("(x) ".concat(r.x," - ").concat(r.x+r.width," (y) ").concat(r.y," - ").concat(r.y-r.height,"   ").concat(r.xScrollOffset),10,60+e),e+=16}}catch(t){n.e(t)}finally{n.f()}}},{key:"render",value:function(){return this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+this.xScrollOffset,this.y-this.height,this.width,this.height),this.determineView()}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(k);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function U(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=J(r);if(o){var n=J(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return U(this,t)});function c(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=i.call(this,t,e,n,r)).isActivated=!1,o.isEnemy=!0,o.color="#863c04",o.movingRight=!1,o.movingLeft=!0,o.xLeftVelocity=1,o.xRightVelocity=1,o.height=46,o.width=46,o}return e=c,(n=[{key:"update",value:function(t){this.xScrollOffset=t,-t>this.x-this.windowWidth-400&&-t<this.x+400?this.isActivated=!0:this.isActivated=!1,this.isActivated&&(this.isDead?(this.y+=10,this.color="#555555",this.movingRight=!1,this.movingLeft=!1):this.checkObstacleSurfaces()?0==this.yUpVelocity&&(this.yDownVelocity=0,this.standing=!0):(this.standing=!1,this.moveDown()),this.movingLeft&&this.moveLeft(),this.movingRight&&this.moveRight(),this.render())}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(k);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}function M(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$(r);if(o){var n=$(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return M(this,t)});function c(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=i.call(this,t,e,n,r)).height=50,o.width=50,o.color="#888800",o.isKillable=!1,o.isDead=!1,o}return e=c,(n=[{key:"update",value:function(t){this.xScrollOffset=t,this.isDead&&(this.y-=40,this.color="#555555"),this.render()}},{key:"render",value:function(){return this.ctx.fillStyle="#111111",this.ctx.fillRect(this.x+this.xScrollOffset,this.y-this.height,this.width,this.height),this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+this.xScrollOffset+2,this.y-this.height+2,this.width-4,this.height-4),0}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(f);function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}function F(t,e){if(e&&("object"===q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(n);if(r){var o=G(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return F(this,t)});function i(t,e,n,r){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(c=o.call(this,t,e,n,r)).isBreakableBrick=!0,c.color="#863c04",c.isKillable=!0,c.isDead=!1,c}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(N);function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Z(t,e)}function tt(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}var nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=et(r);if(o){var n=et(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return tt(this,t)});function c(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=i.call(this,t,e,n,r)).height=80,o.width=200,o.color="#159d06",o.isKillable=!1,o.isDead=!1,o.isObstacle=!1,o}return e=c,(n=[{key:"render",value:function(){this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+this.xScrollOffset+this.width/4,this.y-this.height,this.width/2,this.height/2),this.ctx.fillRect(this.x+this.xScrollOffset,this.y-this.height/2,this.width,this.height/2)}}])&&Y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(f);function rt(t){return function(t){if(Array.isArray(t))return ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||it(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=it(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){f=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw i}}}}function it(t,e){if(t){if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(t,e):void 0}}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ft=480;window.onload=function(){var t,e={canvas:document.createElement("canvas"),start:function(){this.canvas.width=1e3,this.canvas.height=ft,this.context=this.canvas.getContext("2d"),document.body.insertBefore(this.canvas,document.body.childNodes[0]),this.interval=setInterval(h,20),this.garbageCollectionInterval=setInterval(x,5e3)},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}};e.start(),document.addEventListener("keydown",(function(t){"ArrowLeft"!=t.key||t.repeat||(n.movingLeft=!0),"ArrowRight"!=t.key||t.repeat||(n.movingRight=!0),"ArrowDown"!=t.key||t.repeat||(n.crouching=!0)," "!=t.key||t.repeat||(f=!0,n.shortJumping=!0)})),document.addEventListener("keyup",(function(t){"ArrowLeft"==t.key&&(n.movingLeft=!1),"ArrowRight"==t.key&&(n.movingRight=!1),"ArrowDown"==t.key&&(n.crouching=!1)," "==t.key&&(f=!1,s=0,n.shortJumping=!1,n.longJumping=!1)}));var n,r=[],c=[],f=!1,s=0,u=0,l=0,a=i[1](ft);function h(){e.clear(),t.update(l);var o,i=ot(r);try{for(i.s();!(o=i.n()).done;)o.value.update(l)}catch(t){i.e(t)}finally{i.f()}var u,a=ot(c);try{for(a.s();!(u=a.n()).done;){var h=u.value;h.update(l),h.obstacles=[].concat(rt(r),rt(c),[n])}}catch(t){a.e(t)}finally{a.f()}f&&s++,5==s&&(n.longJumping=!0),l=n.update(l),n.obstacles=[].concat(rt(r),rt(c))}function p(t,n,o){var i=new y(e.context,t,ft-n,u,o);r.push(i),u++}function b(t,n,o){var i=new g(e.context,t,ft-n,u,o);r.push(i),u++}function d(t,r){n=new T(e.context,t,ft-r,u),u++}function v(t,n){var r=new I(e.context,t,ft-n,u);c.push(r),u++}function m(t,n){var o=new Q(e.context,t,ft-n,u);r.push(o),u++}function w(t,n){var o=new N(e.context,t,ft-n,u);r.push(o),u++}function O(t,n){var o=new nt(e.context,t,ft-n,u);r.push(o),u++}function x(){c=c.filter((function(t){return!t.isDead})),r=r.filter((function(t){return!t.isDead}))}Object.keys(a).forEach((function(n){switch(n){case"background":D=a.background,t=new o(e.context,D);break;case"player":d.apply(void 0,rt(a.player));break;case"floors":var r,i=ot(a.floors);try{for(i.s();!(r=i.n()).done;){var c=r.value;p.apply(void 0,rt(c))}}catch(t){i.e(t)}finally{i.f()}break;case"floorsWithBottom":var f,s=ot(a.floorsWithBottom);try{for(s.s();!(f=s.n()).done;){var u=f.value;b.apply(void 0,rt(u))}}catch(t){s.e(t)}finally{s.f()}break;case"breakableBricks":var l,h=ot(a.breakableBricks);try{for(h.s();!(l=h.n()).done;){var y=l.value;m.apply(void 0,rt(y))}}catch(t){h.e(t)}finally{h.f()}break;case"bricks":var g,x=ot(a.bricks);try{for(x.s();!(g=x.n()).done;){var S=g.value;w.apply(void 0,rt(S))}}catch(t){x.e(t)}finally{x.f()}break;case"bushes":var j,R=ot(a.bushes);try{for(R.s();!(j=R.n()).done;){var k=j.value;O.apply(void 0,rt(k))}}catch(t){R.e(t)}finally{R.f()}break;case"enemies":var P,_=ot(a.enemies);try{for(_.s();!(P=_.n()).done;){var E=P.value;v.apply(void 0,rt(E))}}catch(t){_.e(t)}finally{_.f()}}var D}))}})();