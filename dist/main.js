(()=>{"use strict";class t{constructor(t,i,s){this.ctx=t,this.height=100,this.width=50,this.float=0,this.x=i,this.y=s,this.movingLeft=!1,this.movingRight=!1,this.jumping=!1,this.xLeftVelocity=0,this.xRightVelocity=0,this.yUpVelocity=0,this.yDownVelocity=0,this.jumpTime=0,this.obstacles}init(){console.log("new sprite"),this.ctx.fillStyle="#FF0000",this.ctx.fillRect(this.x,this.y,this.width,this.height)}update(){this.float>0?(this.yDownVelocity++,this.float-=this.yDownVelocity):(this.yDownVelocity=0,this.float=0),this.yUpVelocity>0&&(this.float+=4*this.yUpVelocity,this.yUpVelocity--),this.movingLeft?(this.moveLeft(),this.xLeftVelocity<20&&this.xLeftVelocity++):this.xLeftVelocity>0&&(this.moveLeft(),this.xLeftVelocity--),this.movingRight?(this.moveRight(),this.xRightVelocity<20&&this.xRightVelocity++):this.xRightVelocity>0&&(this.moveRight(),this.xRightVelocity--),this.jumping?(this.jumpTime<10&&this.jumpTime++,this.jump()):this.jumpTime=0,this.ctx.fillStyle="#FF0000",this.ctx.fillRect(this.x,this.y-this.height-this.float,this.width,this.height)}moveLeft(){this.x-=this.xLeftVelocity}moveRight(){console.log(this.obstacles.y,this.y-this.float),(this.obstacles.x-this.obstacles.width>this.x||this.obstacles.y-this.obstacles.height>this.y-this.float||this.x>this.obstacles.x)&&(this.x+=this.xRightVelocity)}jump(){this.float<=0&&(this.yDownVelocity=0,this.yUpVelocity=10)}}window.onload=function(){var i={canvas:document.createElement("canvas"),start:function(){this.canvas.width=1e3,this.canvas.height=480,this.context=this.canvas.getContext("2d"),document.body.insertBefore(this.canvas,document.body.childNodes[0]),this.interval=setInterval(h,20)},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}};i.start();const s=new t(i.context,20,480),e=new t(i.context,500,480);function h(){i.clear(),s.update(),e.update(),s.obstacles=e}document.addEventListener("keydown",(function(t){"ArrowLeft"!=t.key||t.repeat||(s.movingLeft=!0),"ArrowRight"!=t.key||t.repeat||(s.movingRight=!0)," "!=t.key||t.repeat||(s.jumping=!0)})),document.addEventListener("keyup",(function(t){"ArrowLeft"==t.key&&(s.movingLeft=!1),"ArrowRight"==t.key&&(s.movingRight=!1)," "!=t.key||t.repeat||(s.jumping=!1)})),s.init(),e.init()}})();